:root{
  --bg1:#070a12;
  --bg2:#0b0f18;
  --ink:#0a0e14;
  --white:#fff;

  --gold:#ffd26a;
  --gold2:#fff1b8;
  --red:#d11b3a;
  --red2:#ff4a6a;
  --green:#1ed37b;

  --card:#0e1623;
  --stroke:rgba(255,255,255,.12);
  --soft:rgba(255,255,255,.07);
  --shadow: 0 18px 70px rgba(0,0,0,.6);
  --r:22px;

  --wood1:#6c3f22;
  --wood2:#3b2416;
  --metal1:#ffd26a;
  --metal2:#c59a2a;

  --gift1:#b71d36;
  --gift2:#ffcf5b;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color:#eaf6ff;
  background: linear-gradient(180deg, var(--bg1), var(--bg2));
  overflow:hidden;
}

/* PRELOADER */
.preloader{
  position:fixed; inset:0;
  display:flex; align-items:center; justify-content:center;
  z-index:9999;
  background:
    radial-gradient(900px 700px at 50% 30%, rgba(255,210,106,.18), transparent 60%),
    radial-gradient(900px 700px at 70% 80%, rgba(255,74,106,.10), transparent 60%),
    linear-gradient(180deg, #060812, #070a12);
  padding:18px;
}
.preCard{
  width:min(520px, 94vw);
  background: linear-gradient(180deg, rgba(14,22,35,.92), rgba(9,14,22,.92));
  border:1px solid var(--stroke);
  border-radius:var(--r);
  box-shadow: var(--shadow);
  padding:22px 18px;
  text-align:center;
  backdrop-filter: blur(10px);
}
.preLogo{
  width:150px;
  max-width:58vw;
  margin: 4px auto 10px;
  display:block;
  filter: drop-shadow(0 14px 30px rgba(0,0,0,.6));
}
.preTitle{
  font-family: Cinzel, serif;
  font-weight:900;
  letter-spacing:.6px;
  font-size:1.25rem;
}
.preSub{opacity:.86; margin-top:6px}
.barBg{
  margin-top:14px;
  height:14px;
  border-radius:999px;
  overflow:hidden;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.10);
}
.barFill{
  height:100%;
  width:0%;
  background: linear-gradient(90deg, rgba(255,210,106,.95), rgba(255,241,184,.95), rgba(255,210,106,.95));
  background-size:200% 100%;
  animation: shimmer 1.1s linear infinite;
}
@keyframes shimmer{
  0%{background-position:200% 0}
  100%{background-position:0% 0}
}
.barText{
  margin-top:10px;
  font-weight:800;
  color: var(--gold2);
  text-shadow: 0 0 18px rgba(255,210,106,.35);
}
.preHint{margin-top:10px; opacity:.78}
.preloader.hidden{opacity:0; pointer-events:none; transition:opacity .4s ease}

/* HUD */
.hud{
  position:fixed;
  top:12px; left:12px; right:12px;
  z-index:20;
  display:flex;
  align-items:center;
  gap:10px;
  pointer-events:none;
}
.brand{
  pointer-events:auto;
  display:flex; align-items:center; gap:10px;
  padding:10px 12px;
  border-radius:999px;
  background: rgba(10,14,20,.45);
  border:1px solid rgba(255,255,255,.10);
  backdrop-filter: blur(10px);
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}
.dot{
  width:10px; height:10px; border-radius:999px;
  background: radial-gradient(circle, var(--gold2), var(--gold));
  box-shadow: 0 0 18px rgba(255,210,106,.35);
}
.brandTxt{opacity:.92; font-weight:700; font-size:.95rem}

.soundBtn{
  pointer-events:auto;
  margin-left:auto;
  width:44px; height:44px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(10,14,20,.45);
  color:#fff;
  cursor:pointer;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}

/* BACKGROUND */
.bg{position:fixed; inset:0; z-index:0; pointer-events:none; overflow:hidden}
.stars{
  position:absolute; inset:0;
  background:
    radial-gradient(circle at 20% 20%, rgba(255,255,255,.22), transparent 25%),
    radial-gradient(circle at 70% 35%, rgba(255,255,255,.14), transparent 28%),
    radial-gradient(circle at 40% 75%, rgba(255,255,255,.10), transparent 30%);
  filter: blur(.2px);
  opacity:.55;
}
.glow{
  position:absolute; inset:-20%;
  background:
    radial-gradient(circle at 50% 25%, rgba(255,210,106,.22), transparent 55%),
    radial-gradient(circle at 70% 75%, rgba(255,74,106,.10), transparent 55%),
    radial-gradient(circle at 20% 80%, rgba(30,211,123,.10), transparent 55%);
}
.mist{
  position:absolute; inset:-10%;
  background: radial-gradient(circle at 50% 70%, rgba(255,255,255,.07), transparent 60%);
  filter: blur(10px);
  opacity:.8;
}
.hills{
  position:absolute; left:-10%; right:-10%; bottom:-20%;
  height:55%;
  background:
    radial-gradient(60% 80% at 20% 60%, rgba(191,233,255,.10), transparent 70%),
    radial-gradient(70% 90% at 70% 50%, rgba(191,233,255,.08), transparent 70%),
    linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.45));
  filter: blur(.2px);
}

/* SNOW (DOM particles) */
.snowflake{
  position:absolute;
  top:-20px;
  color: rgba(255,255,255,.85);
  font-size: 12px;
  text-shadow: 0 0 10px rgba(191,233,255,.25);
  animation: fall linear forwards;
  will-change: transform, opacity;
}
@keyframes fall{
  0%{ transform: translateY(-20px) translateX(0); opacity:0 }
  10%{ opacity:1 }
  100%{ transform: translateY(110vh) translateX(var(--drift)); opacity:0 }
}

/* LAYOUT */
.wrap{
  position:relative;
  z-index:5;
  height:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding: 84px 16px 24px;
  text-align:center;
}
.title h1{
  font-family: Cinzel, serif;
  font-weight:900;
  letter-spacing:.6px;
  margin:0;
  font-size: clamp(1.7rem, 5vw, 3rem);
  background: linear-gradient(135deg, var(--gold), var(--gold2), var(--gold));
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
  text-shadow: 0 0 40px rgba(255,210,106,.18);
}
.title p{
  margin:10px 0 0;
  opacity:.9;
  max-width: 720px;
}
.stage{
  position:relative;
  margin-top: 18px;
  width: min(560px, 95vw);
  height: min(520px, 58vh);
  display:flex;
  align-items:center;
  justify-content:center;
}

/* MAGIC AURA + BEAM (no rect√°ngulos feos) */
.aura{
  position:absolute;
  width: 520px;
  height: 520px;
  max-width: 92vw;
  max-height: 92vw;
  border-radius: 999px;
  background:
    radial-gradient(circle at 50% 50%, rgba(255,210,106,.22), transparent 60%),
    radial-gradient(circle at 50% 60%, rgba(255,241,184,.14), transparent 65%),
    radial-gradient(circle at 40% 40%, rgba(255,74,106,.10), transparent 65%);
  filter: blur(0px);
  opacity:.0;
  transform: scale(.92);
  transition: opacity .5s ease, transform .5s ease;
  pointer-events:none;
}
.beam{
  position:absolute;
  width: 360px;
  height: 420px;
  max-width: 80vw;
  max-height: 80vw;
  top: 44px;
  border-radius: 50% 50% 60% 60%;
  background:
    radial-gradient(ellipse at 50% 20%, rgba(255,241,184,.55), transparent 55%),
    radial-gradient(ellipse at 50% 55%, rgba(255,210,106,.35), transparent 65%),
    radial-gradient(ellipse at 50% 85%, rgba(255,210,106,.10), transparent 70%);
  opacity:0;
  transform: translateY(14px) scale(.96);
  filter: blur(0px);
  transition: opacity .6s ease, transform .6s ease;
  mix-blend-mode: screen;
  pointer-events:none;
}

/* CHEST WRAP */
.chestWrap{
  position:relative;
  width: 360px;
  max-width: 92vw;
  height: 320px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  user-select:none;
}
.tapHint{
  margin-top: 16px;
  font-family: Cinzel, serif;
  letter-spacing: .6px;
  font-weight:800;
  color: rgba(255,241,184,.95);
  text-shadow: 0 0 18px rgba(255,210,106,.30);
  animation: hintPulse 2.2s ease-in-out infinite;
}
@keyframes hintPulse{
  0%,100%{opacity:1; transform:translateY(0)}
  50%{opacity:.72; transform:translateY(-2px)}
}

/* 3D CHEST */
.chest3d{
  position:relative;
  width: 240px;
  height: 180px;
  transform-style: preserve-3d;
  transform: rotateX(8deg) rotateY(-18deg);
  transition: transform .6s ease;
  filter: drop-shadow(0 26px 42px rgba(0,0,0,.55));
}
.chestWrap:hover .chest3d{ transform: rotateX(10deg) rotateY(-22deg) scale(1.01); }

.base, .lid{ position:absolute; left:50%; transform-style:preserve-3d; }

.base{
  top: 62px;
  width: 220px; height: 110px;
  transform: translateX(-50%);
}
.lid{
  top: 8px;
  width: 230px; height: 80px;
  transform: translateX(-50%);
  transform-origin: 50% 100%;
  transition: transform 900ms cubic-bezier(.2,.9,.2,1.15);
}

/* Faces */
.baseFace, .lidFace{
  position:absolute; inset:0;
  border-radius: 14px;
  border: 2px solid rgba(255,210,106,.38);
  background: linear-gradient(180deg, rgba(108,63,34,.98), rgba(59,36,22,.98));
  box-shadow:
    inset 0 10px 24px rgba(255,255,255,.08),
    inset 0 -18px 34px rgba(0,0,0,.35);
}
.lidFace{
  border-radius: 18px;
  background: linear-gradient(180deg, rgba(130,76,40,.98), rgba(76,46,26,.98));
}

/* Depth */
.baseFront{ transform: translateZ(18px); }
.baseBack{ transform: rotateY(180deg) translateZ(18px); }
.baseLeft{ transform: rotateY(-90deg) translateZ(110px); width:36px; left:-8px; }
.baseRight{ transform: rotateY(90deg) translateZ(110px); width:36px; left:auto; right:-8px; }
.baseTop{ transform: rotateX(90deg) translateZ(55px); height:36px; top:-8px; }

.lidFront{ transform: translateZ(18px); }
.lidBack{ transform: rotateY(180deg) translateZ(18px); }
.lidLeft{ transform: rotateY(-90deg) translateZ(115px); width:36px; left:-8px; }
.lidRight{ transform: rotateY(90deg) translateZ(115px); width:36px; left:auto; right:-8px; }
.lidTop{ transform: rotateX(90deg) translateZ(40px); height:36px; top:-8px; }

/* Metal bands */
.lidBand{
  position:absolute;
  left:50%;
  width: 82%;
  height: 20px;
  top: 30px;
  transform: translateX(-50%) translateZ(20px);
  border-radius: 10px;
  background: linear-gradient(135deg, rgba(255,210,106,.95), rgba(197,154,42,.95));
  box-shadow: 0 0 22px rgba(255,210,106,.25);
}

/* Lock */
.lock{
  position:absolute;
  left:50%;
  top: 38px;
  width: 52px;
  height: 62px;
  transform: translateX(-50%) translateZ(20px);
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(255,241,184,.92), rgba(197,154,42,.92));
  border: 2px solid rgba(255,210,106,.55);
  box-shadow: 0 10px 24px rgba(0,0,0,.35), 0 0 24px rgba(255,210,106,.20);
}
.lock:before{
  content:"";
  position:absolute;
  left:50%;
  top:-22px;
  width: 42px;
  height: 26px;
  transform: translateX(-50%);
  border: 6px solid rgba(197,154,42,.95);
  border-bottom:none;
  border-radius: 18px 18px 0 0;
  filter: drop-shadow(0 8px 16px rgba(0,0,0,.22));
}

/* STATES */
.chestWrap.opening .chest3d{
  animation: shake .55s ease-in-out;
}
@keyframes shake{
  0%,100%{transform: rotateX(8deg) rotateY(-18deg) translateX(0)}
  20%{transform: rotateX(8deg) rotateY(-18deg) translateX(-4px)}
  40%{transform: rotateX(8deg) rotateY(-18deg) translateX(4px)}
  60%{transform: rotateX(8deg) rotateY(-18deg) translateX(-3px)}
  80%{transform: rotateX(8deg) rotateY(-18deg) translateX(3px)}
}

.chestWrap.opened .lid{
  transform: translateX(-50%) rotateX(-115deg);
}
.chestWrap.opened .tapHint{opacity:0; transform:translateY(8px); transition:.35s ease}

/* GIFT POP */
.gift{
  position:absolute;
  width: 220px; height: 220px;
  left:50%;
  top: 160px;
  transform: translateX(-50%) translateY(60px) scale(.72);
  opacity:0;
  pointer-events:none;
  filter: drop-shadow(0 24px 50px rgba(0,0,0,.55));
}
.gift.show{
  opacity:1;
  transform: translateX(-50%) translateY(-30px) scale(1);
  transition: transform 900ms cubic-bezier(.2,.9,.2,1.1), opacity .35s ease;
}
.giftBox{
  position:absolute;
  left:50%; top:50%;
  width: 110px; height: 110px;
  transform: translate(-50%,-50%) rotateX(16deg) rotateY(-22deg);
  transform-style: preserve-3d;
  animation: float 2.2s ease-in-out infinite;
}
@keyframes float{
  0%,100%{ transform: translate(-50%,-50%) rotateX(16deg) rotateY(-22deg) translateY(0) }
  50%{ transform: translate(-50%,-50%) rotateX(16deg) rotateY(-22deg) translateY(-8px) }
}
.giftFace{
  position:absolute; inset:0;
  border-radius: 14px;
  border:2px solid rgba(255,241,184,.22);
  background: linear-gradient(180deg, rgba(183,29,54,.98), rgba(129,18,38,.98));
  box-shadow: inset 0 10px 20px rgba(255,255,255,.08), inset 0 -18px 34px rgba(0,0,0,.35);
}
.gfFront{ transform: translateZ(16px); }
.gfBack{ transform: rotateY(180deg) translateZ(16px); }
.gfLeft{ transform: rotateY(-90deg) translateZ(55px); width:32px; left:-10px; }
.gfRight{ transform: rotateY(90deg) translateZ(55px); width:32px; left:auto; right:-10px; }
.gfTop{ transform: rotateX(90deg) translateZ(55px); height:32px; top:-10px; background: linear-gradient(180deg, rgba(255,207,91,.35), rgba(183,29,54,.98));}
.gfBottom{ transform: rotateX(-90deg) translateZ(55px); height:32px; top:auto; bottom:-10px; }

.ribbonV{
  position:absolute;
  left:50%; top:0;
  width: 18px; height: 110px;
  transform: translateX(-50%) translateZ(18px);
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(255,210,106,.98), rgba(197,154,42,.98));
  box-shadow: 0 0 16px rgba(255,210,106,.25);
}
.ribbonH{
  position:absolute;
  left:0; top:50%;
  width: 110px; height: 18px;
  transform: translateY(-50%) translateZ(18px);
  border-radius: 10px;
  background: linear-gradient(135deg, rgba(255,210,106,.98), rgba(197,154,42,.98));
  box-shadow: 0 0 16px rgba(255,210,106,.25);
}
.bow{
  position:absolute;
  left:50%; top:-10px;
  width: 52px; height: 26px;
  transform: translateX(-50%) translateZ(22px);
  display:flex; gap:6px;
}
.bow span{
  flex:1;
  border-radius: 20px 20px 6px 6px;
  background: linear-gradient(135deg, rgba(255,210,106,.98), rgba(197,154,42,.98));
  transform-origin: bottom center;
  box-shadow: 0 0 14px rgba(255,210,106,.22);
}
.bow span:first-child{ transform: rotate(-18deg); }
.bow span:last-child{ transform: rotate(18deg); }

/* FOOT */
.foot{margin-top: 12px}
.mini{opacity:.75; font-size:.95rem}

/* MODAL */
.modal{
  position:fixed; inset:0;
  display:none;
  align-items:center; justify-content:center;
  padding:18px;
  z-index:50;
  background: rgba(0,0,0,.62);
  backdrop-filter: blur(10px);
}
.modal.show{display:flex}
.card{
  width:min(560px, 94vw);
  background: linear-gradient(180deg, rgba(14,22,35,.95), rgba(9,14,22,.95));
  border:1px solid rgba(255,255,255,.14);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  padding:18px;
  position:relative;
  overflow:hidden;
  text-align:left;
}
.cardGlow{
  position:absolute;
  inset:-40%;
  background:
    radial-gradient(circle at 50% 30%, rgba(255,210,106,.24), transparent 58%),
    radial-gradient(circle at 50% 70%, rgba(255,74,106,.12), transparent 60%),
    radial-gradient(circle at 30% 70%, rgba(30,211,123,.12), transparent 60%);
  animation: cardGlow 2.8s ease-in-out infinite;
  pointer-events:none;
}
@keyframes cardGlow{
  0%,100%{transform:scale(1); opacity:.85}
  50%{transform:scale(1.08); opacity:1}
}
.tag{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:7px 10px;
  border-radius:999px;
  background: rgba(255,210,106,.14);
  border:1px solid rgba(255,210,106,.22);
  color: var(--gold2);
  font-weight:900;
  font-size:.9rem;
  position:relative;
  z-index:1;
}
.card h2{
  margin:10px 0 6px;
  font-family: Cinzel, serif;
  font-weight:900;
  letter-spacing:.4px;
  position:relative;
  z-index:1;
}
.desc{
  margin:0 0 12px;
  opacity:.9;
  position:relative;
  z-index:1;
}
.pillRow{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:10px;
  position:relative;
  z-index:1;
}
.pill{
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
  border-radius: 16px;
  padding:10px;
}
.pill span{opacity:.75; display:block; font-size:.9rem}
.pill b{display:block; margin-top:2px; color: var(--gold2)}

.btnRow{display:flex; gap:10px; margin-top:12px; position:relative; z-index:1}
.btn{
  flex:1;
  border-radius:16px;
  padding:12px 14px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color:#fff;
  font-weight:900;
  cursor:pointer;
}
.btn.primary{
  background: linear-gradient(135deg, rgba(255,210,106,.95), rgba(255,241,184,.95));
  color:#1b1305;
  border-color: rgba(255,241,184,.6);
  box-shadow: 0 14px 35px rgba(255,210,106,.18);
}
.btn.ghost{background: rgba(255,255,255,.06)}
.note{margin-top:10px; opacity:.78; font-size:.92rem; position:relative; z-index:1}

@media (max-width: 480px){
  .tapHint{font-size:.92rem}
  .stage{height:min(520px, 62vh)}
}

